testrpc:
    image: "codelab-ethereum"
    expose:
        - "8545"
    ports:
        - "8545:8545"
    command: "testrpc -d"
unit:
    image: "codelab-ethereum"
    command: "truffle test"
    volumes:
        - ./:/usr/src/app
    links:
        - "testrpc"
web:
    image: "codelab-ethereum"
    ports:
        - "9000:9000"
        - "35729:35729"
    volumes:
        - ./:/usr/src/app
    command: "socat TCP-LISTEN:8545,fork,reuseaddr TCP:testrpc:8545 & gulp serve"
    links:
        - "testrpc"
# debug container
# command:
#     image: "codelab-ethereum"
#     volumes:
#         - ./:/usr/src/app
#     tty: true
#     links:
#         - "testrpc"
#     entrypoint: /bin/sh

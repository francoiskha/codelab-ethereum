testrpc:
    image: "codelab-ethereum"
    ports:
        - 8545:8545
    command: "testrpc -d"
    tty: false
truffle:
    image: "codelab-ethereum"
    command: "truffle test"
    volumes:
        - ./:/usr/src/app
    links:
        - "testrpc"
web:
    image: "codelab-ethereum"
    ports:
        - 9000:9000
        - 35729:35729
    volumes:
        - ./client:/usr/src/app/client
        - ./contracts:/usr/src/app/contracts
        - ./migrations:/usr/src/app/migrations
        - ./server:/usr/src/app/server
        - ./tasks:/usr/src/app/tasks
        - ./gulpfile.js:/usr/src/app/gulpfile.js
        - ./Procfile:/usr/src/app/Procfile
        - ./.truffle-solidity-loader:/usr/src/app/.truffle-solidity-loader
        - ./truffle.js:/usr/src/app/truffle.js
        - ./package.json:/usr/src/app/package.json
    command: "gulp serve"
    tty: false
    links:
        - "testrpc"
command:
    image: "codelab-ethereum"
    volumes:
        - ./:/usr/src/app
    tty: true
    stdin_open: true
    entrypoint: /bin/sh
    links:
        - testrpc
        - web